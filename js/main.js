'use strict';var _get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(e===void 0){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if('value'in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}(function(){'use strict';function a(a,b){return'string'==typeof a&&(a=document.querySelectorAll(a)),a instanceof Array||(a=Array.prototype.slice.call(a)),b instanceof Function&&(a=a.map(function(a){return b(a)})),a}function b(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName('body')[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{width:e,height:f}}function c(c,d){var e=0|d.getAttribute('data-first');e&&c.goTo(e);var f=d.hasAttribute('data-options')?d.getAttribute('data-options').split(' '):[];f.forEach(function(a){return g[a]&&g[a](c)});var h={openOnMobile:function openOnMobile(){if(!(600<b().width)){var a=c.find(function(a){return'0'===a.getAttribute('data-order')});if(a){var d=a.querySelector('.info-img a[href^="javascript:"]');d&&d.click()}}}};a('[data-control]',function(a){var b=a.getAttribute('data-control'),d=b?document.querySelector(b):null;if(d&&d===c.parent){var e=a.getAttribute('data-action');('prev'===e||'next'===e)&&c.size>=c.length&&a.setAttribute('data-oversize',!0);var f=a.getAttribute('data-params'),g=f?f.split(','):null,i=a.getAttribute('data-callback');e&&c[e]instanceof Function&&a.addEventListener('click',function(){c[e].apply(c,g),i&&h[i]&&h[i]()})}})}var d=function(){function a(b){if(_classCallCheck(this,a),this.type='Slider',!(this instanceof a))return new a(b);if(this.parent=b.parent||document.querySelector(b.parentSelector||'.slider'),!this.parent)throw'[SLIDER]: Container n\xE3o encontrado.';if(this.childSelector=b.childSelector||'.slide',!this.children.length)throw'[SLIDER]: Slides n\xE3o encontrados.';this.index=0,this.duration=b.duration||3e3,this.parent.classList.add('set'),this.compose()}return _createClass(a,[{key:'forEach',value:function forEach(a){return this.children.forEach(a)}},{key:'map',value:function map(a){return this.children.map(a)}},{key:'filter',value:function filter(a){return this.children.filter(a)}},{key:'find',value:function find(a){return this.children.find(a)}},{key:'compose',value:function compose(){var a,b,c=this;return b=0<this.index?this.index-1:this.children.length-1,a=this.index<this.children.length-1?this.index+1:0,this.forEach(function(d,e){d.classList.remove('prev'),d.classList.remove('current'),d.classList.remove('next'),e===b&&d.classList.add('prev'),e===a&&d.classList.add('next'),e===c.index&&d.classList.add('current')}),this}},{key:'play',value:function play(){var a;return a=this,this.playingStateID=setInterval(function(){return a.next()},this.duration),this.isPlaying=!0,this}},{key:'pause',value:function pause(){return clearInterval(this.playingStateID),this.isPlaying=!1,this}},{key:'playpause',value:function playpause(){return this.isPlaying?this.pause():this.play()}},{key:'prev',value:function prev(){var a;if(0<this.index?this.index--:this.index=this.children.length-1,a=this.isPlaying,a&&this.pause(),this.compose(),a)return this.play()}},{key:'next',value:function next(){var a;if(this.index<this.children.length-1?this.index++:this.index=0,a=this.isPlaying,a&&this.pause(),this.compose(),a)return this.play()}},{key:'goTo',value:function goTo(a){return this.index=a,this.compose()}},{key:'on',value:function on(a,b){return this.parent.addEventListener(a,b),this}},{key:'off',value:function off(a,b){return this.parent.removeEventListener(a,b),this}},{key:'inspect',value:function inspect(a){var b=this;return console[!0===a?'groupCollapsed':'group'](this.type),console.table(Object.keys(this).map(function(a){return{prop:a,value:b[a],type:_typeof(b[a])}})),console.log(this.parent),console.log(this.children),console.warn(Date.now().toString()),console.groupEnd(this.type),this}},{key:'children',get:function get(){return Array.prototype.slice.call(this.parent.querySelectorAll(this.childSelector))}},{key:'length',get:function get(){return this.children.length}}]),a}(),e=function(a){function b(a){_classCallCheck(this,b),a.parentSelector=a.parentSelector||'.carousel';var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.type='Carousel',c.size=0|a.size,c.compose(),c}return _inherits(b,a),_createClass(b,[{key:'compose',value:function compose(){var b=this,c=this.index+1;function a(a,b){a.classList.remove(b)}return this.forEach(function(d,e){var f=e-c+1;if(0>f&&(f=b.length-c+e+1),d.setAttribute('data-order',f),d.classList.remove('prev'),d.classList.remove('current'),d.classList.remove('next'),d.classList.remove('will-go-prev'),d.classList.remove('will-go-next'),b.size){var g=b.length<=b.size?'current':-1<f&&f<b.size?'current':-1==f||f==b.length-1?'prev':f===b.size?'next':'';if(!g)return b;d.classList.add(g),d.style.order=f}if(b.dir){var h='will-go-'+b.dir;d.classList.add(h),d.addEventListener('webkitAnimationEnd',function(){a(d,h)}),d.addEventListener('animationend',function(){a(d,h)})}}),this}},{key:'prev',value:function prev(){return this.dir='prev',_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'prev',this).call(this)}},{key:'next',value:function next(){return this.dir='next',_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'next',this).call(this)}},{key:'goTo',value:function goTo(a){return this.dir=a>this.index?'next':'prev',_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'goTo',this).call(this,a)}}]),b}(d),f={telefone:function telefone(a){var b=[/\d+/gi,/^(\d\d?)/,/^(\d\d)(\d{4})-?(\d{1,4})/,/^(\d\d)(\d{5})-?(\d{1,4})/],c=a.value.match(b[0]);if(!c)return a.value='';var d=a.value=c.join('');0<d.length&&(a.value=d.replace(b[1],'($1')),2<d.length&&(a.value=d.replace(b[1],'($1) ')),6<d.length&&(a.value=d.replace(b[2],'($1) $2-$3')),10<d.length&&(a.value=d.replace(b[3],'($1) $2-$3')),11<d.length&&(a.value=a.value.substr(0,15))},cpf:function(a){var b=/\d+/gi,c=a.value.match(b);if(!c)return a.value='';var d=c.join(''),e=/^([0-9]{1,3})?\.?([0-9]{1,3})?\.?([0-9]{1,3})?-?([0-9]{1,2})?$/,f=/^([0-9]{1,2})?\.?([0-9]{1,3})?\.?([0-9]{1,3})?\/?([0-9]{1,4})?-?([0-9]{1,2})?$/;a.value=a.value.replace(/[^\d./-]/gi,''),e.test(d)?a.value=d.replace(e,function(e,f,a,b,c){return(f||'')+(a?'.'+a:'')+(b?'.'+b:'')+(c?'-'+c:'')}):f.test(d)&&(a.value=d.replace(f,function(f,g,a,b,c,d){return(g||'')+(a?'.'+a:'')+(b?'.'+b:'')+(c?'/'+c:'')+(d?'-'+d:'')})),18<a.value.length&&(a.value=a.value.substr(0,18))},data:function data(a){if('date'!==a.type){var b=a.value.replace(/^0?\/|[^\d/]/gi,'');return''===b?(a.value=b,void(a.style.borderColor=null)):void(a.value=b.replace(/(^|\/)00+\/?/g,'0').replace(/(^|\/)([1-9]\/)/,'0$2').replace(/(\d\d)(\/?)(\d{1,2})?(\/?)0*(\d{1,4})?.*/g,function(b,c,d,e,f,g){return a.style.borderColor=31<c||12<e?'red':null,c+(e?'/'+e:d||'')+(g?'/'+g:f||'')}))}},numeros:function numeros(a){/^[0-9]+$/.test(a.value)||(a.value=a.value.substring(0,a.value.length-1))}},g={autoplay:function autoplay(a){a.play().on('mouseover',function(){return a.pause()}).on('mouseout',function(){return a.play()})}};window.setup=function(){document.body.addEventListener('touchstart',function(){return!1});var b=document.querySelector('.site-header').offsetHeight,g=document.querySelectorAll('a[href^="'+baseurl+'/#"].scroll');Array.prototype.forEach.call(g,function(a){return a.addEventListener('click',function(){var a=document.querySelector(this.hash);return!!a&&void scrollToY(a.offsetTop-b,1e3)})}),window.sliders=a('.slider',function(a){var b=new d({parent:a});c(b,a)}),window.carousels=a('.carousel',function(a){var b=0|a.getAttribute('data-size'),d=new e({parent:a,size:b});return c(d,a),d}),a('[data-mask]',function(a){var b=a.getAttribute('data-mask');b&&f[b]&&f[b]instanceof Function&&a.addEventListener('input',function(){f[b](a)})}),a('[data-script]',function(a){var b=a.getAttribute('data-script');b&&a.value&&window[b](0,a.value)})},window.modalFilme=function(a){return a(a)},window.modal=function(a){return'string'==typeof a&&(a=document.querySelector(a)),{abrir:function abrir(){a.classList.add('target')},fechar:function fechar(){a.classList.remove('target')}}},window.modalFilme=function(a){'string'==typeof a&&(a=document.querySelector(a));var c=window.modal(a);if(800>b().width){var d=a.querySelector('[data-btn="link-filme-interna"]');d&&(c.abrir=function(){location.assign(d.href)})}return c},window.backgroundMobile=function(){document.querySelector('.content-relative').classList.add('overlay')},window.removeBackground=function(){document.querySelector('.content-relative').classList.remove('overlay')}})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJGdW5jdGlvbiIsIm1hcCIsIndpbmRvdyIsImRvY3VtZW50RWxlbWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwiaW5uZXJIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ3aWR0aCIsImhlaWdodCIsImdldEF0dHJpYnV0ZSIsImdvVG8iLCJoYXNBdHRyaWJ1dGUiLCJzcGxpdCIsImZvckVhY2giLCJvcGVuT25Nb2JpbGUiLCJmaW5kIiwicXVlcnlTZWxlY3RvciIsImNsaWNrIiwicGFyZW50Iiwic2l6ZSIsImxlbmd0aCIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhcHBseSIsInR5cGUiLCJwYXJlbnRTZWxlY3RvciIsImNoaWxkU2VsZWN0b3IiLCJjaGlsZHJlbiIsImluZGV4IiwiZHVyYXRpb24iLCJjbGFzc0xpc3QiLCJhZGQiLCJjb21wb3NlIiwiZmlsdGVyIiwicmVtb3ZlIiwicGxheWluZ1N0YXRlSUQiLCJzZXRJbnRlcnZhbCIsIm5leHQiLCJpc1BsYXlpbmciLCJjbGVhckludGVydmFsIiwicGF1c2UiLCJwbGF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJ0YWJsZSIsIk9iamVjdCIsImtleXMiLCJwcm9wIiwidmFsdWUiLCJsb2ciLCJ3YXJuIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiZ3JvdXBFbmQiLCJzdHlsZSIsIm9yZGVyIiwiZGlyIiwidGVsZWZvbmUiLCJtYXRjaCIsImpvaW4iLCJyZXBsYWNlIiwic3Vic3RyIiwiY3BmIiwidGVzdCIsImRhdGEiLCJib3JkZXJDb2xvciIsIm51bWVyb3MiLCJzdWJzdHJpbmciLCJhdXRvcGxheSIsIm9uIiwic2V0dXAiLCJib2R5Iiwib2Zmc2V0SGVpZ2h0IiwiYmFzZXVybCIsImhhc2giLCJzY3JvbGxUb1kiLCJvZmZzZXRUb3AiLCJzbGlkZXJzIiwiY2Fyb3VzZWxzIiwibW9kYWxGaWxtZSIsIm1vZGFsIiwiYWJyaXIiLCJmZWNoYXIiLCJsb2NhdGlvbiIsImFzc2lnbiIsImhyZWYiLCJiYWNrZ3JvdW5kTW9iaWxlIiwicmVtb3ZlQmFja2dyb3VuZCJdLCJtYXBwaW5ncyI6IjYwQ0FBQyxXQUFZLENBQ2IsYUE2UkEsZUFBOEIsQ0FJMUIsTUFIb0IsUUFBaEIsVUFHSixHQUg4QixFQUFPQSxTQUFTQyxnQkFBVCxHQUdyQyxFQUZNLFlBQWdCQyxNQUV0QixHQUY4QixFQUFPQSxNQUFNQyxTQUFOLENBQWdCQyxLQUFoQixDQUFzQkMsSUFBdEIsR0FFckMsRUFESSxZQUFvQkMsU0FDeEIsR0FEa0MsRUFBTyxFQUFLQyxHQUFMLENBQVMsa0JBQUssS0FBTCxDQUFULENBQ3pDLEdBQ0QsQ0FFRCxZQUFrQixDQUNoQixHQUFNLEdBQUlDLE1BQVYsQ0FDRSxFQUFJUixRQUROLENBRUUsRUFBSSxFQUFFUyxlQUZSLENBR0UsRUFBSSxFQUFFQyxvQkFBRixDQUF1QixNQUF2QixFQUErQixDQUEvQixDQUhOLENBSUUsRUFBUSxFQUFFQyxVQUFGLEVBQWdCLEVBQUVDLFdBQWxCLEVBQWlDLEVBQUVBLFdBSjdDLENBS0UsRUFBUyxFQUFFQyxXQUFGLEVBQWlCLEVBQUVDLFlBQW5CLEVBQW1DLEVBQUVBLFlBTGhELENBTUEsTUFBTyxDQUNMQyxPQURLLENBRUxDLFFBRkssQ0FJUixDQTZESCxlQUFzQyxDQUNwQyxHQUFNLEdBQTRDLENBQXBDLEdBQU9DLFlBQVAsQ0FBb0IsWUFBcEIsQ0FBZCxDQURvQyxHQUdsQyxFQUFPQyxJQUFQLEdBSGtDLENBTXBDLEdBQU0sR0FBVSxFQUFPQyxZQUFQLENBQW9CLGNBQXBCLEVBQXNDLEVBQU9GLFlBQVAsQ0FBb0IsY0FBcEIsRUFBb0NHLEtBQXBDLENBQTBDLEdBQTFDLENBQXRDLENBQXVGLEVBQXZHLENBQ0EsRUFBUUMsT0FBUixD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LGFBQU4sQ0FBb0IsaUNBQXBCLENBQVosQ0FEd0IsSUFHdEIsRUFBZWtFLEtBQWYsQ0FBdUIsVUFBVyxDQUFDRSxTQUFTQyxNQUFULENBQWdCLEVBQUlDLElBQXBCLENBQTJCLENBSHhDLENBS3pCLENBQ0QsUUFDRCxDQS9hWSxDQWliYnRGLE9BQU91RixnQkFBUCxDQUEwQixVQUE0QixDQUNwRC9GLFNBQVN3QixhQUFULENBQXVCLG1CQUF2QixFQUE0Q2MsU0FBNUMsQ0FBc0RDLEdBQXRELENBQTBELFNBQTFELENBQ0QsQ0FuYlksQ0FxYmIvQixPQUFPd0YsZ0JBQVAsQ0FBMEIsVUFBNEIsQ0FDcERoRyxTQUFTd0IsYUFBVCxDQUF1QixtQkFBdkIsRUFBNENjLFNBQTVDLENBQXNESSxNQUF0RCxDQUE2RCxTQUE3RCxDQUNELENBRUEsQ0F6YkEsRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbid1c2Ugc3RyaWN0JztcblxuY2xhc3MgU2xpZGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgdGhpcy50eXBlID0gJ1NsaWRlcic7XHJcbiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbGlkZXIpKSByZXR1cm4gbmV3IFNsaWRlcihjb25maWcpO1xyXG4gIFxyXG4gICAgICB0aGlzLnBhcmVudCA9IGNvbmZpZy5wYXJlbnQgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcucGFyZW50U2VsZWN0b3IgfHwgJy5zbGlkZXInKTtcclxuICAgICAgaWYgKCF0aGlzLnBhcmVudCkgdGhyb3cgJ1tTTElERVJdOiBDb250YWluZXIgbsOjbyBlbmNvbnRyYWRvLic7XHJcbiAgXHJcbiAgICAgIHRoaXMuY2hpbGRTZWxlY3RvciA9IGNvbmZpZy5jaGlsZFNlbGVjdG9yIHx8ICcuc2xpZGUnO1xyXG4gICAgICBpZiAoIXRoaXMuY2hpbGRyZW4ubGVuZ3RoKSB0aHJvdyAnW1NMSURFUl06IFNsaWRlcyBuw6NvIGVuY29udHJhZG9zLic7XHJcbiAgXHJcbiAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICB0aGlzLmR1cmF0aW9uID0gY29uZmlnLmR1cmF0aW9uIHx8IDMwMDA7XHJcbiAgICAgIHRoaXMucGFyZW50LmNsYXNzTGlzdC5hZGQoJ3NldCcpO1xyXG4gICAgICB0aGlzLmNvbXBvc2UoKTtcclxuICAgIH1cclxuICBcclxuICAgIGdldCBjaGlsZHJlbigpIHtcclxuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMucGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5jaGlsZFNlbGVjdG9yKSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBnZXQgbGVuZ3RoKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBmb3JFYWNoKGZuKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmZvckVhY2goZm4pO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgbWFwKGZuKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcChmbik7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBmaWx0ZXIoZm4pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uZmlsdGVyKGZuKTtcclxuICAgIH1cclxuICBcclxuICAgIGZpbmQoZm4pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uZmluZChmbik7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjb21wb3NlKCkge1xyXG4gICAgICB2YXIgbmV4dEluZGV4LCBwcmV2SW5kZXg7XHJcbiAgICAgIHByZXZJbmRleCA9IHRoaXMuaW5kZXggPiAwID8gdGhpcy5pbmRleCAtIDEgOiB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7XHJcbiAgICAgIG5leHRJbmRleCA9IHRoaXMuaW5kZXggPCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEgPyB0aGlzLmluZGV4ICsgMSA6IDA7XHJcbiAgICAgIHRoaXMuZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2Jyk7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ25leHQnKTtcclxuICAgICAgICBpZiAoaSA9PT0gcHJldkluZGV4KSBlbC5jbGFzc0xpc3QuYWRkKCdwcmV2Jyk7XHJcbiAgICAgICAgaWYgKGkgPT09IG5leHRJbmRleCkgZWwuY2xhc3NMaXN0LmFkZCgnbmV4dCcpO1xyXG4gICAgICAgIGlmIChpID09PSB0aGlzLmluZGV4KSBlbC5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICBcclxuICAgIHBsYXkoKSB7XHJcbiAgICAgIHZhciB0aGF0O1xyXG4gICAgICB0aGF0ID0gdGhpcztcclxuICAgICAgdGhpcy5wbGF5aW5nU3RhdGVJRCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhhdC5uZXh0KCk7XHJcbiAgICAgIH0sIHRoaXMuZHVyYXRpb24pO1xyXG4gICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcGF1c2UoKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wbGF5aW5nU3RhdGVJRCk7XHJcbiAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcGxheXBhdXNlKCkge1xyXG4gICAgICBpZiAodGhpcy5pc1BsYXlpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXVzZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXkoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgcHJldigpIHtcclxuICAgICAgdmFyIHBsYXlpbmdTdGF0ZTtcclxuICAgICAgaWYgKHRoaXMuaW5kZXggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleC0tO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7XHJcbiAgICAgIH1cclxuICAgICAgcGxheWluZ1N0YXRlID0gdGhpcy5pc1BsYXlpbmc7XHJcbiAgICAgIGlmIChwbGF5aW5nU3RhdGUpIHtcclxuICAgICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jb21wb3NlKCk7XHJcbiAgICAgIGlmIChwbGF5aW5nU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGF5KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIG5leHQoKSB7XHJcbiAgICAgIHZhciBwbGF5aW5nU3RhdGU7XHJcbiAgICAgIGlmICh0aGlzLmluZGV4IDwgdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIHBsYXlpbmdTdGF0ZSA9IHRoaXMuaXNQbGF5aW5nO1xyXG4gICAgICBpZiAocGxheWluZ1N0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29tcG9zZSgpO1xyXG4gICAgICBpZiAocGxheWluZ1N0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXHJcbiAgICBnb1RvKGluZGV4KSB7XHJcbiAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgICAgcmV0dXJuIHRoaXMuY29tcG9zZSgpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgb24oZXZlbnQsIGZuKSB7XHJcbiAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBvZmYoZXZlbnQsIGZuKSB7XHJcbiAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBpbnNwZWN0KGNvbGxhcHNlZCkge1xyXG4gICAgICBjb25zb2xlW2NvbGxhcHNlZCA9PT0gdHJ1ZSA/ICdncm91cENvbGxhcHNlZCcgOiAnZ3JvdXAnXSh0aGlzLnR5cGUpO1xyXG4gICAgICBjb25zb2xlLnRhYmxlKFxyXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMpLm1hcChrZXkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvcDoga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpc1trZXldLFxyXG4gICAgICAgICAgICB0eXBlOiB0eXBlb2YgdGhpc1trZXldXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgICAgY29uc29sZS5sb2codGhpcy5wYXJlbnQpO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmNoaWxkcmVuKTtcclxuICAgICAgY29uc29sZS53YXJuKERhdGUubm93KCkudG9TdHJpbmcoKSk7XHJcbiAgICAgIGNvbnNvbGUuZ3JvdXBFbmQodGhpcy50eXBlKTtcclxuICBcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgXHJcbn1cblxuY2xhc3MgQ2Fyb3VzZWwgZXh0ZW5kcyBTbGlkZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIGNvbmZpZy5wYXJlbnRTZWxlY3RvciA9IGNvbmZpZy5wYXJlbnRTZWxlY3RvciB8fCAnLmNhcm91c2VsJztcclxuICAgIHN1cGVyKGNvbmZpZyk7XHJcbiAgICB0aGlzLnR5cGUgPSAnQ2Fyb3VzZWwnO1xyXG4gICAgdGhpcy5zaXplID0gY29uZmlnLnNpemUgfCAwO1xyXG4gICAgdGhpcy5jb21wb3NlKCk7XHJcbiAgfVxyXG5cclxuICBjb21wb3NlKCkge1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmluZGV4ICsgMTtcclxuICAgIHRoaXMuZm9yRWFjaCgoc2xpZGUsIGkpID0+IHtcclxuICAgICAgbGV0IGl0ZW1PcmRlciA9IGkgLSBwb3NpdGlvbiArIDE7XHJcbiAgICAgIGlmIChpdGVtT3JkZXIgPCAwKSBpdGVtT3JkZXIgPSB0aGlzLmxlbmd0aCAtIHBvc2l0aW9uICsgaSArIDE7XHJcbiAgICAgIHNsaWRlLnNldEF0dHJpYnV0ZSgnZGF0YS1vcmRlcicsIGl0ZW1PcmRlcik7XHJcblxyXG4gICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2Jyk7XHJcbiAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKTtcclxuICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnbmV4dCcpO1xyXG4gICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCd3aWxsLWdvLXByZXYnKTtcclxuICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnd2lsbC1nby1uZXh0Jyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5zaXplKSB7XHJcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID1cclxuICAgICAgICAgIHRoaXMubGVuZ3RoIDw9IHRoaXMuc2l6ZSA/ICdjdXJyZW50JyA6XHJcbiAgICAgICAgICBpdGVtT3JkZXIgPiAtMSAmJiBpdGVtT3JkZXIgPCB0aGlzLnNpemUgPyAnY3VycmVudCcgOlxyXG4gICAgICAgICAgaXRlbU9yZGVyID09PSAtMSB8fCBpdGVtT3JkZXIgPT09IHRoaXMubGVuZ3RoIC0gMSA/ICdwcmV2JyA6XHJcbiAgICAgICAgICBpdGVtT3JkZXIgPT09IHRoaXMuc2l6ZSA/ICduZXh0JyA6XHJcbiAgICAgICAgICAnJztcclxuICAgICAgICBpZiAoIWNsYXNzTmFtZSkgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgICAgIHNsaWRlLnN0eWxlLm9yZGVyID0gaXRlbU9yZGVyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5kaXIpIHtcclxuICAgICAgICBjb25zdCBhbmltQ2xhc3NOYW1lID0gJ3dpbGwtZ28tJyArIHRoaXMuZGlyO1xyXG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoYW5pbUNsYXNzTmFtZSk7XHJcbiAgICAgICAgc2xpZGUuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmtpdEFuaW1hdGlvbkVuZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlbW92ZVdpbGxSZW5kZXJDbGFzcyhzbGlkZSwgYW5pbUNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2xpZGUuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlbW92ZVdpbGxSZW5kZXJDbGFzcyhzbGlkZSwgYW5pbUNsYXNzTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVXaWxsUmVuZGVyQ2xhc3Moc2xpZGUsIGNsYXNzTmFtZSkge1xyXG4gICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwcmV2KCkge1xyXG4gICAgdGhpcy5kaXIgPSAncHJldic7XHJcbiAgICByZXR1cm4gc3VwZXIucHJldigpO1xyXG4gIH1cclxuXHJcbiAgbmV4dCgpIHtcclxuICAgIHRoaXMuZGlyID0gJ25leHQnO1xyXG4gICAgcmV0dXJuIHN1cGVyLm5leHQoKTtcclxuICB9XHJcblxyXG4gIGdvVG8oaW5kZXgpIHtcclxuICAgIHRoaXMuZGlyID0gaW5kZXggPiB0aGlzLmluZGV4ID8gJ25leHQnIDogJ3ByZXYnO1xyXG4gICAgcmV0dXJuIHN1cGVyLmdvVG8oaW5kZXgpO1xyXG4gIH1cclxuXHJcbn1cblxuY29uc3QgbWFza3MgPSB7XHJcblxyXG4gICAgdGVsZWZvbmU6IGNhbXBvID0+IHtcclxuICAgICAgY29uc3QgcmVncmFzID0gWy9cXGQrL2dpLCAvXihcXGRcXGQ/KS8sIC9eKFxcZFxcZCkoXFxkezR9KS0/KFxcZHsxLDR9KS8sIC9eKFxcZFxcZCkoXFxkezV9KS0/KFxcZHsxLDR9KS9dO1xyXG4gICAgICBjb25zdCB2YWxvcmVzID0gY2FtcG8udmFsdWUubWF0Y2gocmVncmFzWzBdKTtcclxuICAgICAgaWYgKCF2YWxvcmVzKSByZXR1cm4gY2FtcG8udmFsdWUgPSAnJztcclxuICAgICAgY29uc3QgdmFsb3IgPSBjYW1wby52YWx1ZSA9IHZhbG9yZXMuam9pbignJyk7XHJcbiAgICAgIGlmICh2YWxvci5sZW5ndGggPiAwKSBjYW1wby52YWx1ZSA9IHZhbG9yLnJlcGxhY2UocmVncmFzWzFdLCAnKCQxJyk7XHJcbiAgICAgIGlmICh2YWxvci5sZW5ndGggPiAyKSBjYW1wby52YWx1ZSA9IHZhbG9yLnJlcGxhY2UocmVncmFzWzFdLCAnKCQxKSAnKTtcclxuICAgICAgaWYgKHZhbG9yLmxlbmd0aCA+IDYpIGNhbXBvLnZhbHVlID0gdmFsb3IucmVwbGFjZShyZWdyYXNbMl0sICcoJDEpICQyLSQzJyk7XHJcbiAgICAgIGlmICh2YWxvci5sZW5ndGggPiAxMCkgY2FtcG8udmFsdWUgPSB2YWxvci5yZXBsYWNlKHJlZ3Jhc1szXSwgJygkMSkgJDItJDMnKTtcclxuICAgICAgaWYgKHZhbG9yLmxlbmd0aCA+IDExKSBjYW1wby52YWx1ZSA9IGNhbXBvLnZhbHVlLnN1YnN0cigwLCAxNSk7XHJcbiAgICB9LFxyXG4gIFxyXG4gICAgY3BmOiBjYW1wbyA9PiB7XHJcbiAgICAgIGNvbnN0IG51bWVyb3MgPSAvXFxkKy9naTtcclxuICAgICAgY29uc3QgdmFsb3JlcyA9IGNhbXBvLnZhbHVlLm1hdGNoKG51bWVyb3MpO1xyXG4gICAgICBpZiAoIXZhbG9yZXMpIHJldHVybiBjYW1wby52YWx1ZSA9ICcnO1xyXG4gICAgICBjb25zdCB2YWxvciA9IHZhbG9yZXMuam9pbignJyk7XHJcbiAgICAgIGNvbnN0IGNwZiA9IC9eKFswLTldezEsM30pP1xcLj8oWzAtOV17MSwzfSk/XFwuPyhbMC05XXsxLDN9KT8tPyhbMC05XXsxLDJ9KT8kLztcclxuICAgICAgY29uc3QgY25waiA9IC9eKFswLTldezEsMn0pP1xcLj8oWzAtOV17MSwzfSk/XFwuPyhbMC05XXsxLDN9KT9cXC8/KFswLTldezEsNH0pPy0/KFswLTldezEsMn0pPyQvO1xyXG4gICAgICBjYW1wby52YWx1ZSA9IGNhbXBvLnZhbHVlLnJlcGxhY2UoL1teXFxkLi8tXS9naSwgJycpO1xyXG4gICAgICBpZiAoY3BmLnRlc3QodmFsb3IpKSBjYW1wby52YWx1ZSA9IHZhbG9yLnJlcGxhY2UoY3BmLCAoYWxsLCBhLCBiLCBjLCBkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIChhIHx8ICcnKSArIChiID8gJy4nICsgYiA6ICcnKSArIChjID8gJy4nICsgYyA6ICcnKSArIChkID8gJy0nICsgZCA6ICcnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGVsc2UgaWYgKGNucGoudGVzdCh2YWxvcikpIGNhbXBvLnZhbHVlID0gdmFsb3IucmVwbGFjZShjbnBqLCAoYWxsLCBhLCBiLCBjLCBkLCBlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIChhIHx8ICcnKSArIChiID8gJy4nICsgYiA6ICcnKSArIChjID8gJy4nICsgYyA6ICcnKSArIChkID8gJy8nICsgZCA6ICcnKSArIChlID8gJy0nICsgZSA6ICcnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChjYW1wby52YWx1ZS5sZW5ndGggPiAxOCkgY2FtcG8udmFsdWUgPSBjYW1wby52YWx1ZS5zdWJzdHIoMCwgMTgpO1xyXG4gICAgfSxcclxuICBcclxuICAgIGRhdGE6IGNhbXBvID0+IHtcclxuICAgICAgaWYgKGNhbXBvLnR5cGUgPT09ICdkYXRlJykgcmV0dXJuO1xyXG4gICAgICBjb25zdCBudW1lcm9zID0gY2FtcG8udmFsdWUucmVwbGFjZSgvXjA/XFwvfFteXFxkL10vZ2ksICcnKTtcclxuICAgICAgaWYgKG51bWVyb3MgPT09ICcnKSB7XHJcbiAgICAgICAgY2FtcG8udmFsdWUgPSBudW1lcm9zO1xyXG4gICAgICAgIGNhbXBvLnN0eWxlLmJvcmRlckNvbG9yID0gbnVsbDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FtcG8udmFsdWUgPSBudW1lcm9zXHJcbiAgICAgICAgLnJlcGxhY2UoLyhefFxcLykwMCtcXC8/L2csICcwJylcclxuICAgICAgICAucmVwbGFjZSgvKF58XFwvKShbMS05XVxcLykvLCAnMCQyJylcclxuICAgICAgICAucmVwbGFjZShcclxuICAgICAgICAgIC8oXFxkXFxkKShcXC8/KShcXGR7MSwyfSk/KFxcLz8pMCooXFxkezEsNH0pPy4qL2csXHJcbiAgICAgICAgICBmdW5jdGlvbiAoYWxsLCBkZCwgczEsIG1tLCBzMiwgYWFhYSkge1xyXG4gICAgICAgICAgICBpZiAoZGQgPiAzMSB8fCBtbSA+IDEyKSBjYW1wby5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZWQnO1xyXG4gICAgICAgICAgICBlbHNlIGNhbXBvLnN0eWxlLmJvcmRlckNvbG9yID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIGRkICsgKG1tID8gJy8nICsgbW0gOiBzMSB8fCAnJykgKyAoYWFhYSA/ICcvJyArIGFhYWEgOiBzMiB8fCAnJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbiAgXHJcbiAgICBudW1lcm9zOiBjYW1wbyA9PiB7XHJcbiAgICAgIGlmICghL15bMC05XSskLy50ZXN0KGNhbXBvLnZhbHVlKSkge1xyXG4gICAgICAgIGNhbXBvLnZhbHVlID0gY2FtcG8udmFsdWUuc3Vic3RyaW5nKDAsIGNhbXBvLnZhbHVlLmxlbmd0aCAtIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXHJcbiAgfTtcblxuZnVuY3Rpb24gX21hcCh3aGF0LCBjYWxsYmFjaykge1xyXG4gICAgaWYgKHR5cGVvZiB3aGF0ID09PSAnc3RyaW5nJykgd2hhdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwod2hhdCk7XHJcbiAgICBpZiAoISh3aGF0IGluc3RhbmNlb2YgQXJyYXkpKSB3aGF0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwod2hhdCk7XHJcbiAgICBpZiAoY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikgd2hhdCA9IHdoYXQubWFwKHcgPT4gY2FsbGJhY2sodykpO1xyXG4gICAgcmV0dXJuIHdoYXQ7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHNjcmVlbigpIHtcclxuICAgIGNvbnN0IHcgPSB3aW5kb3csXHJcbiAgICAgIGQgPSBkb2N1bWVudCxcclxuICAgICAgZSA9IGQuZG9jdW1lbnRFbGVtZW50LFxyXG4gICAgICBnID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLFxyXG4gICAgICB3aWR0aCA9IHcuaW5uZXJXaWR0aCB8fCBlLmNsaWVudFdpZHRoIHx8IGcuY2xpZW50V2lkdGgsXHJcbiAgICAgIGhlaWdodCA9IHcuaW5uZXJIZWlnaHQgfHwgZS5jbGllbnRIZWlnaHQgfHwgZy5jbGllbnRIZWlnaHQ7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aCxcclxuICAgICAgaGVpZ2h0XHJcbiAgICB9XHJcbiAgfVxuXG5jb25zdCBzbGlkZXJPcHRpb25zID0ge1xyXG4gIGF1dG9wbGF5OiBzbGlkZXIgPT4ge1xyXG4gICAgc2xpZGVyXHJcbiAgICAgIC5wbGF5KClcclxuICAgICAgLm9uKCdtb3VzZW92ZXInLCAoKSA9PiBzbGlkZXIucGF1c2UoKSlcclxuICAgICAgLm9uKCdtb3VzZW91dCcsICgpID0+IHNsaWRlci5wbGF5KCkpO1xyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIHNldHVwKCkge1xyXG5cclxuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IG9mZnNldEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWhlYWRlcicpLm9mZnNldEhlaWdodDtcclxuICBjb25zdCBwYWdlTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWZePVwiJyArIGJhc2V1cmwgKyAnLyNcIl0uc2Nyb2xsJyk7XHJcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChwYWdlTGlua3MsIGxpbmsgPT4gbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5oYXNoKTtcclxuICAgICAgaWYgKCFzZWN0aW9uKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHNjcm9sbFRvWShzZWN0aW9uLm9mZnNldFRvcCAtIG9mZnNldEhlYWRlciwgMTAwMCk7XHJcbiAgfSkpOyAgXHJcblxyXG4gIHdpbmRvdy5zbGlkZXJzID0gX21hcCgnLnNsaWRlcicsIHBhcmVudCA9PiB7XHJcbiAgICBjb25zdCBzbGlkZXIgPSBuZXcgU2xpZGVyKHtcclxuICAgICAgcGFyZW50XHJcbiAgICB9KTtcclxuICAgIGNvbmZpZ1NsaWRlcihzbGlkZXIsIHBhcmVudCk7XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5jYXJvdXNlbHMgPSBfbWFwKCcuY2Fyb3VzZWwnLCBwYXJlbnQgPT4ge1xyXG4gICAgY29uc3Qgc2l6ZSA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpIHwgMDtcclxuICAgIGNvbnN0IGNhcm91c2VsID0gbmV3IENhcm91c2VsKHtcclxuICAgICAgcGFyZW50LFxyXG4gICAgICBzaXplXHJcbiAgICB9KTtcclxuICAgIGNvbmZpZ1NsaWRlcihjYXJvdXNlbCwgcGFyZW50KTtcclxuICAgIHJldHVybiBjYXJvdXNlbDtcclxuICB9KTtcclxuXHJcbiAgX21hcCgnW2RhdGEtbWFza10nLCBjYW1wbyA9PiB7XHJcbiAgICBjb25zdCBuYW1lID0gY2FtcG8uZ2V0QXR0cmlidXRlKCdkYXRhLW1hc2snKTtcclxuICAgIGlmICghbmFtZSkgcmV0dXJuO1xyXG4gICAgaWYgKCFtYXNrc1tuYW1lXSB8fCAhKG1hc2tzW25hbWVdIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm47XHJcbiAgICBjYW1wby5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgbWFza3NbbmFtZV0oY2FtcG8pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIF9tYXAoJ1tkYXRhLXNjcmlwdF0nLCBpdGVtID0+IHtcclxuICAgIGNvbnN0IHZhbHVlRm4gPSBpdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtc2NyaXB0XCIpO1xyXG4gICAgaWYgKCF2YWx1ZUZuKSByZXR1cm47XHJcbiAgICBpZiAoIWl0ZW0udmFsdWUpIHJldHVybjtcclxuICAgIHdpbmRvd1t2YWx1ZUZuXSgwLCBpdGVtLnZhbHVlKTtcclxuICB9KTtcclxufVxyXG5cclxud2luZG93LnNldHVwID0gc2V0dXA7XHJcblxyXG5mdW5jdGlvbiBjb25maWdTbGlkZXIoc2xpZGVyLCBwYXJlbnQpIHtcclxuICBjb25zdCBmaXJzdCA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmlyc3QnKSB8IDA7XHJcbiAgaWYgKGZpcnN0KSB7XHJcbiAgICBzbGlkZXIuZ29UbyhmaXJzdCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcHRpb25zID0gcGFyZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1vcHRpb25zJykgPyBwYXJlbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbnMnKS5zcGxpdCgnICcpIDogW107XHJcbiAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiBzbGlkZXJPcHRpb25zW29wdGlvbl0gJiYgc2xpZGVyT3B0aW9uc1tvcHRpb25dKHNsaWRlcikpO1xyXG5cclxuICBjb25zdCBzbGlkZXJDYWxsYmFja3MgPSB7XHJcbiAgICBvcGVuT25Nb2JpbGU6ICgpID0+IHtcclxuICAgICAgaWYgKHNjcmVlbigpLndpZHRoID4gNjAwKSByZXR1cm47XHJcbiAgICAgIGNvbnN0IGZpcnN0ID0gc2xpZGVyLmZpbmQoc2xpZGUgPT4gc2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLW9yZGVyJykgPT09ICcwJyk7XHJcbiAgICAgIGlmICghZmlyc3QpIHJldHVybjtcclxuICAgICAgY29uc3QgYnRuID0gZmlyc3QucXVlcnlTZWxlY3RvcignLmluZm8taW1nIGFbaHJlZl49XCJqYXZhc2NyaXB0OlwiXScpO1xyXG4gICAgICBpZiAoIWJ0bikgcmV0dXJuO1xyXG4gICAgICBidG4uY2xpY2soKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfbWFwKCdbZGF0YS1jb250cm9sXScsIGNvbnRyb2wgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gY29udHJvbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udHJvbCcpO1xyXG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IHRhcmdldCA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IG51bGw7XHJcblxyXG4gICAgaWYgKHRhcmdldEVsZW1lbnQgJiYgdGFyZ2V0RWxlbWVudCA9PT0gc2xpZGVyLnBhcmVudCkge1xyXG4gICAgICBjb25zdCBhY3Rpb24gPSBjb250cm9sLmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rpb24nKTtcclxuICAgICAgaWYgKChhY3Rpb24gPT09ICdwcmV2JyB8fCBhY3Rpb24gPT09ICduZXh0JykgJiYgKHNsaWRlci5zaXplID49IHNsaWRlci5sZW5ndGgpKSB7XHJcbiAgICAgICAgY29udHJvbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtb3ZlcnNpemUnLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBhY3Rpb25EYXRhID0gY29udHJvbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyYW1zJyk7XHJcbiAgICAgIGNvbnN0IHBhcmFtcyA9IGFjdGlvbkRhdGEgPyBhY3Rpb25EYXRhLnNwbGl0KCcsJykgOiBudWxsO1xyXG4gICAgICBjb25zdCBjYWxsYmFjayA9IGNvbnRyb2wuZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxiYWNrJyk7XHJcbiAgICAgIGlmIChhY3Rpb24gJiYgc2xpZGVyW2FjdGlvbl0gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgIGNvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzbGlkZXJbYWN0aW9uXS5hcHBseShzbGlkZXIsIHBhcmFtcyk7XHJcbiAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgc2xpZGVyQ2FsbGJhY2tzW2NhbGxiYWNrXSkgc2xpZGVyQ2FsbGJhY2tzW2NhbGxiYWNrXSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG59XHJcblxyXG53aW5kb3cubW9kYWxGaWxtZSA9IGZ1bmN0aW9uIG1vZGFsRmlsbWUobW9kYWwpIHtcclxuICAvLyBpZiAoc2NyZWVuKCkud2lkdGggPCA2MDApIHJldHVybjtcclxuICByZXR1cm4gbW9kYWwobW9kYWwpO1xyXG59O1xyXG5cclxud2luZG93Lm1vZGFsID0gZnVuY3Rpb24gbW9kYWwobW9kYWwpIHtcclxuICBpZiAodHlwZW9mIG1vZGFsID09PSAnc3RyaW5nJykgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsKTtcclxuICByZXR1cm4ge1xyXG4gICAgYWJyaXI6IGZ1bmN0aW9uKCkge21vZGFsLmNsYXNzTGlzdC5hZGQoJ3RhcmdldCcpO30sXHJcbiAgICBmZWNoYXI6IGZ1bmN0aW9uKCkge21vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ3RhcmdldCcpO31cclxuICB9O1xyXG59O1xyXG5cclxud2luZG93Lm1vZGFsRmlsbWUgPSBmdW5jdGlvbiBtb2RhbEZpbG1lKG1vZGFsKSB7XHJcbiAgaWYgKHR5cGVvZiBtb2RhbCA9PT0gJ3N0cmluZycpIG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbCk7XHJcbiAgY29uc3QgbW9kYWxDb21wb25lbnQgPSB3aW5kb3cubW9kYWwobW9kYWwpO1xyXG4gIGlmIChzY3JlZW4oKS53aWR0aCA8IDgwMCkge1xyXG4gICAgY29uc3QgYnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYnRuPVwibGluay1maWxtZS1pbnRlcm5hXCJdJyk7XHJcbiAgICBpZiAoYnRuKSB7XHJcbiAgICAgIG1vZGFsQ29tcG9uZW50LmFicmlyID0gZnVuY3Rpb24oKSB7bG9jYXRpb24uYXNzaWduKGJ0bi5ocmVmKTt9O1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbW9kYWxDb21wb25lbnQ7XHJcbn07XHJcblxyXG53aW5kb3cuYmFja2dyb3VuZE1vYmlsZSA9IGZ1bmN0aW9uIGJhY2tncm91bmRNb2JpbGUoKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtcmVsYXRpdmUnKS5jbGFzc0xpc3QuYWRkKCdvdmVybGF5Jyk7XHJcbn07XHJcblxyXG53aW5kb3cucmVtb3ZlQmFja2dyb3VuZCA9IGZ1bmN0aW9uIHJlbW92ZUJhY2tncm91bmQoKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtcmVsYXRpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XHJcbn07XG5cbn0oKSk7XG4iXX0=
